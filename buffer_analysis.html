<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Buffer Analysis | buffer_analysis.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Buffer Analysis | buffer_analysis.utf8" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Buffer Analysis | buffer_analysis.utf8" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path=""><a href="#buffer-analysis"><i class="fa fa-check"></i><b>1</b> Buffer Analysis</a><ul>
<li class="chapter" data-level="1.1" data-path=""><a href="#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path=""><a href="#environment-setup"><i class="fa fa-check"></i><b>1.2</b> Environment Setup</a><ul>
<li class="chapter" data-level="1.2.1" data-path=""><a href="#load-libraries"><i class="fa fa-check"></i><b>1.2.1</b> Load Libraries</a></li>
<li class="chapter" data-level="1.2.2" data-path=""><a href="#load-data"><i class="fa fa-check"></i><b>1.2.2</b> Load Data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path=""><a href="#simple-overlay-map"><i class="fa fa-check"></i><b>1.3</b> Simple Overlay Map</a></li>
<li class="chapter" data-level="1.4" data-path=""><a href="#spatial-transformation"><i class="fa fa-check"></i><b>1.4</b> Spatial Transformation</a><ul>
<li class="chapter" data-level="1.4.1" data-path=""><a href="#transform-crs"><i class="fa fa-check"></i><b>1.4.1</b> Transform CRS</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path=""><a href="#generate-buffers"><i class="fa fa-check"></i><b>1.5</b> Generate Buffers</a><ul>
<li class="chapter" data-level="1.5.1" data-path=""><a href="#visualize-buffers"><i class="fa fa-check"></i><b>1.5.1</b> Visualize buffers</a></li>
<li class="chapter" data-level="1.5.2" data-path=""><a href="#merge-buffers"><i class="fa fa-check"></i><b>1.5.2</b> Merge buffers</a></li>
<li class="chapter" data-level="1.5.3" data-path=""><a href="#visualize-union-of-buffers"><i class="fa fa-check"></i><b>1.5.3</b> Visualize union of buffers</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="buffer-analysis" class="section level1">
<h1><span class="header-section-number">1</span> Buffer Analysis</h1>
<div id="overview" class="section level2">
<h2><span class="header-section-number">1.1</span> Overview</h2>
<p>Once we have
Our objectives are thus to:</p>
<ul>
<li></li>
</ul>
</div>
<div id="environment-setup" class="section level2">
<h2><span class="header-section-number">1.2</span> Environment Setup</h2>
<p>To replicate the code &amp; functions illustrated in this tutorial, you’ll need to have R and RStudio downloaded and installed on your system. This tutorial assumes some familiarity with the R programming language.</p>
<div id="load-libraries" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Load Libraries</h3>
<p>We will use the following packages in this tutorial:</p>
<ul>
<li><code>sf</code>: to manipulate spatial data</li>
<li><code>tmap</code>: to visualize and create maps</li>
<li><code>tidygeocoder</code>: to convert addresses to geographic coordinates</li>
</ul>
<p>First, load the required libraries.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(sf)</a></code></pre></div>
<pre><code>## Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(tidygeocoder)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">library</span>(tmap)</a></code></pre></div>
</div>
<div id="load-data" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Load Data</h3>
<p>We will use the shapefile of spatially enabled resource data, <code>methadoneClinics.shp</code>, generated from our previous tutorial. A copy of the shapefile can also be found <a href="">here</a>, but note that all four files are required (.dbf, .prj, .shp, and .shx) to consitute a shapefile. As a reminder, this shapefile includes methadone clinics in Chicago as our working example.</p>
<p>If you don’t have a shapefile of your data, but already have geographic coordinates as two columns in your CSV file, you can still use this tutorial. A reminder of how to transform your CSV with coordinates into a spatial data frame in R can be found <a href="link%20to%20end%20of%20the%20geocoding%20tutorial">here</a>.</p>
<p>First, load in the MOUD resources shapefile. Let’s take a look at the first few rows of the dataset.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">MetClinics &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;methadoneClinics.shp&quot;</span>)</a></code></pre></div>
<pre><code>## Reading layer `methadoneClinics&#39; from data source `/Users/maryniakolak/code/opioid-environment-toolkit/methadoneClinics.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 27 features and 8 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -87.7349 ymin: 41.68698 xmax: -87.57673 ymax: 41.96475
## CRS:            4326</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">head</span>(MetClinics)</a></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 8 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -87.67818 ymin: 41.89268 xmax: -87.63409 ymax: 41.96475
## CRS:            4326
##   X                                                         Name
## 1 1                Chicago Treatment and Counseling Center, Inc.
## 2 2                      Sundace Methadone Treatment Center, LLC
## 3 3 Soft Landing Interventions/DBA Symetria Recovery of Lakeview
## 4 4                                        PDSSC - Chicago, Inc.
## 5 5                          Center for Addictive Problems, Inc.
## 6 6                                Family Guidance Centers, Inc.
##                   Address    City State   Zip
## 1 4453 North Broadway st. Chicago    IL 60640
## 2 4545 North Broadway St. Chicago    IL 60640
## 3    3934 N. Lincoln Ave. Chicago    IL 60613
## 4     2260 N. Elston Ave. Chicago    IL 60614
## 5        609 N. Wells St. Chicago    IL 60654
## 6     310 W. Chicago Ave. Chicago    IL 60654
##                                    fullAdd geo_method
## 1 4453 North Broadway st. Chicago IL 60640        osm
## 2 4545 North Broadway St. Chicago IL 60640        osm
## 3    3934 N. Lincoln Ave. Chicago IL 60613     census
## 4     2260 N. Elston Ave. Chicago IL 60614     census
## 5        609 N. Wells St. Chicago IL 60654     census
## 6     310 W. Chicago Ave. Chicago IL 60654     census
##                     geometry
## 1 POINT (-87.65566 41.96321)
## 2 POINT (-87.65694 41.96475)
## 3 POINT (-87.67818 41.95331)
## 4 POINT (-87.67407 41.92269)
## 5 POINT (-87.63409 41.89268)
## 6 POINT (-87.63636 41.89657)</code></pre>
<p>Next, we load a shapefile of Chicago community areas. You can often find shapefiles (or spatial data formats like geojson) on city data portals for direct download. In our case, we used the data provided on the <a href="https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Community-Areas-current-/cauq-8yn6">City of Chicago Data Portal</a>, though we will walk you through downloading zip code boundaries directly through the Census via R in a later tutorial.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">Areas &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/geo_export_8027c825-e55a-4218-aac1-2d7676ad1b47.shp&quot;</span>)</a></code></pre></div>
<pre><code>## Reading layer `geo_export_8027c825-e55a-4218-aac1-2d7676ad1b47&#39; from data source `/Users/maryniakolak/code/opioid-environment-toolkit/data/geo_export_8027c825-e55a-4218-aac1-2d7676ad1b47.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 77 features and 9 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -87.94011 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## CRS:            4326</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(Areas)</a></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 9 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -87.7069 ymin: 41.79448 xmax: -87.58001 ymax: 41.99076
## CRS:            4326
##   area area_num_1 area_numbe comarea comarea_id       community perimeter
## 1    0         35         35       0          0         DOUGLAS         0
## 2    0         36         36       0          0         OAKLAND         0
## 3    0         37         37       0          0     FULLER PARK         0
## 4    0         38         38       0          0 GRAND BOULEVARD         0
## 5    0         39         39       0          0         KENWOOD         0
## 6    0          4          4       0          0  LINCOLN SQUARE         0
##   shape_area shape_len                       geometry
## 1   46004621  31027.05 MULTIPOLYGON (((-87.60914 4...
## 2   16913961  19565.51 MULTIPOLYGON (((-87.59215 4...
## 3   19916705  25339.09 MULTIPOLYGON (((-87.6288 41...
## 4   48492503  28196.84 MULTIPOLYGON (((-87.60671 4...
## 5   29071742  23325.17 MULTIPOLYGON (((-87.59215 4...
## 6   71352328  36624.60 MULTIPOLYGON (((-87.67441 4...</code></pre>
</div>
</div>
<div id="simple-overlay-map" class="section level2">
<h2><span class="header-section-number">1.3</span> Simple Overlay Map</h2>
<p>We can plot these quickly using the <code>tmap</code> library to ensure they are overlaying correctly. If they are, our coordinate systems are working correctly.</p>
<p>When using <code>tmap</code> the first parameter references the spatial file we’d like to map (<code>tm_shape</code>), and the next parameter(s) indicate how we want to style the data. For polygons, we can style <code>tm_borders</code> to have a slightly transparent boundary. For the point data, we will use red dots that are sized appropriately using the <code>tm_dots</code> parameter. When working with <code>tmap</code> or any other library for the first time, it’s helpful to review the <a href="">documentation</a> and related tutorials for more tips on usability.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">## 1st layer (gets plotted first)</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">tm_shape</span>(Areas) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">alpha =</span> <span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="co">## 2nd layer (overlay)</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinics) <span class="op">+</span><span class="st"> </span><span class="kw">tm_dots</span>(<span class="dt">size =</span> <span class="fl">0.4</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>) </a></code></pre></div>
<p><img src="buffer_analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="spatial-transformation" class="section level2">
<h2><span class="header-section-number">1.4</span> Spatial Transformation</h2>
<p>Next, we check the Coordinate Reference System for our data. Are the coordinate systems for clinic <strong>points</strong> and community <strong>areas</strong> the same? For R to treat both coordinate reference systems the same, the metadata has to be exact.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">st_crs</span>(MetClinics) </a></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: 4326 
##   wkt:
## GEOGCS[&quot;WGS 84&quot;,
##     DATUM[&quot;WGS_1984&quot;,
##         SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,
##             AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
##         AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
##     UNIT[&quot;degree&quot;,0.0174532925199433,
##         AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],
##     AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">st_crs</span>(Areas)</a></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: 4326 
##   wkt:
## GEOGCS[&quot;WGS84(DD)&quot;,
##     DATUM[&quot;WGS84&quot;,
##         SPHEROID[&quot;WGS84&quot;,6378137.0,298.257223563]],
##     PRIMEM[&quot;Greenwich&quot;,0.0],
##     UNIT[&quot;degree&quot;,0.017453292519943295],
##     AXIS[&quot;Geodetic longitude&quot;,EAST],
##     AXIS[&quot;Geodetic latitude&quot;,NORTH]]</code></pre>
<p>We can see that while both have a code of 4326 and appear to both be WGS84 systems, they are not encoded in exactly the same why. Thus, R will treat them differently – which will pose problems for spatial analysis that interacts these two layers. One way of resolving this challenge is to <strong>transform the spatial reference system</strong> so that they are exact.</p>
<p>To complicate matters, we are also interested in generating a buffer to approximate a “service”area&quot; around each methadone provider. If we want to use a buffer of two miles, we will need to use a spatial data reference system that uses an appropriate distance metric, like feet or meters. As noted in the previous tutorial the WGS84 coordinate reference system uses degrees, and is not an appropriate CRS for the spatial analysis we require.</p>
<p>Thus, our next goal is to transform both spatial data files into a new, standardized CRS.</p>
<div id="transform-crs" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Transform CRS</h3>
<p>To calculate buffers, we will need to conver to a different CRS that preserves distance. Trying using a search engine like Google with search terms “CRS Illinois ft”, for example, to look for a code that provides what we need. After searching, we found EPSG:3435 that uses feet for a distance metric. We’ll use that!</p>
<p>First, set a new CRS.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">CRS.new &lt;-<span class="st"> </span><span class="kw">st_crs</span>(<span class="st">&quot;EPSG:3435&quot;</span>)</a></code></pre></div>
<p>Next, transform both datasets to your new CRS.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">MetClinics<span class="fl">.3435</span> &lt;-<span class="st"> </span><span class="kw">st_transform</span>(MetClinics, CRS.new)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">Areas<span class="fl">.3435</span> &lt;-<span class="st"> </span><span class="kw">st_transform</span>(Areas, CRS.new)</a></code></pre></div>
<p>Check the CRS of both datasets again. If they are identical you’re ready to move onto the next step!</p>
</div>
</div>
<div id="generate-buffers" class="section level2">
<h2><span class="header-section-number">1.5</span> Generate Buffers</h2>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># Create 2-mile buffers for each house point</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">MetClinic_buffers &lt;-<span class="st"> </span><span class="kw">st_buffer</span>(MetClinics<span class="fl">.3435</span>, <span class="dv">10560</span>)</a></code></pre></div>
<p>Inspect the structure of the object you just created. Note that this is a <em>new</em> data object, represented as a polygon. Each buffer around each point is a separate entity.</p>
<div id="visualize-buffers" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Visualize buffers</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Map in tmap</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">tm_shape</span>(Areas<span class="fl">.3435</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinics<span class="fl">.3435</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_dots</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinic_buffers) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">col =</span> <span class="st">&quot;red&quot;</span>) </a></code></pre></div>
<p><img src="buffer_analysis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Map Housing Buffers</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">tm_shape</span>(Areas) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinic_buffers) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">alpha =</span> <span class="fl">.4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinics<span class="fl">.3435</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_dots</span>(<span class="dt">col =</span> <span class="st">&quot;red&quot;</span>) </a></code></pre></div>
<p><img src="buffer_analysis_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="merge-buffers" class="section level3">
<h3><span class="header-section-number">1.5.2</span> Merge buffers</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">union.buffers &lt;-<span class="st"> </span><span class="kw">st_union</span>(MetClinic_buffers)</a></code></pre></div>
</div>
<div id="visualize-union-of-buffers" class="section level3">
<h3><span class="header-section-number">1.5.3</span> Visualize union of buffers</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># Map Housing Buffers</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="kw">tm_shape</span>(Areas) <span class="op">+</span><span class="st">  </span><span class="kw">tm_borders</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span><span class="kw">tm_shape</span>(union.buffers) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">alpha =</span> <span class="fl">.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="st">  </span><span class="kw">tm_shape</span>(MetClinics<span class="fl">.3435</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_dots</span>(<span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="fl">0.4</span>) </a></code></pre></div>
<p><img src="buffer_analysis_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": false
});
});
</script>

</body>

</html>
