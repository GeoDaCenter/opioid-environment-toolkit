<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps) | Opioid Environment Toolkit</title>
  <meta name="description" content="Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps) | Opioid Environment Toolkit" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps) | Opioid Environment Toolkit" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps) | Opioid Environment Toolkit" />
  
  
  

<meta name="author" content="Created by : Center for Spatial Data Science" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="link-contextual-data.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="spatial-data-introduction.html"><a href="spatial-data-introduction.html"><i class="fa fa-check"></i>Spatial Data Introduction</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html"><i class="fa fa-check"></i>Geocoding and Visualizing Point Data</a><ul>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-research-question"><i class="fa fa-check"></i>Research Question</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-setup"><i class="fa fa-check"></i>Environment Setup</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-read-resources"><i class="fa fa-check"></i>Read in resource data</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-geocode-addresses"><i class="fa fa-check"></i>Geocode addresses</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-spatial-dataframe"><i class="fa fa-check"></i>Convert to Spatial DataFrame</a></li>
<li class="chapter" data-level="" data-path="geocodingAddress-tutorial.html"><a href="geocodingAddress-tutorial.html#GA-contributors"><i class="fa fa-check"></i>Contributors and Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html"><i class="fa fa-check"></i>Calculate Minimum Distance Access Metric</a><ul>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-research-question"><i class="fa fa-check"></i>Research Question</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-setup"><i class="fa fa-check"></i>Environment Setup</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-read-resources"><i class="fa fa-check"></i>Read in resource data</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-read-zips"><i class="fa fa-check"></i>Read in zip code data</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-calculate-centroids"><i class="fa fa-check"></i>Calculate centroids of zip code boundaries</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-correct-projection"><i class="fa fa-check"></i>Ensure that centroid and resource projections match</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-distance"><i class="fa fa-check"></i>Calculate distance from centroid to nearest resource</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-save"><i class="fa fa-check"></i>Save as zip-code level dataset</a></li>
<li class="chapter" data-level="" data-path="centroid-access-tutorial.html"><a href="centroid-access-tutorial.html#CA-contributors"><i class="fa fa-check"></i>Contributors and Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html"><i class="fa fa-check"></i>Downloading Community Contextual Data</a><ul>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-research-question"><i class="fa fa-check"></i>Research Question</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-setup"><i class="fa fa-check"></i>Environment Setup</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-api-key"><i class="fa fa-check"></i>Get your Census API Key</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-get-data"><i class="fa fa-check"></i>Download variables of interest</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-get-geometry"><i class="fa fa-check"></i>Get Geometry</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-appendix"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-explore-variables"><i class="fa fa-check"></i>Explore variables available</a></li>
<li class="chapter" data-level="" data-path="getACSData-tutorial.html"><a href="getACSData-tutorial.html#CD-contributors"><i class="fa fa-check"></i>Contributors and Further Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="link-contextual-data.html"><a href="link-contextual-data.html"><i class="fa fa-check"></i>Link-contextual-data or Join</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html"><i class="fa fa-check"></i>Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps)</a><ul>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-research-question"><i class="fa fa-check"></i>Research Question</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-setup"><i class="fa fa-check"></i>Environment Setup</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-load-variables"><i class="fa fa-check"></i>Load data</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-mapping"><i class="fa fa-check"></i>Thematic Plotting</a><ul>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-quantile-plot"><i class="fa fa-check"></i>Quantile</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-jenks-plot"><i class="fa fa-check"></i>Natural Breaks</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-stdev-plot"><i class="fa fa-check"></i>Standard Deviation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-appendix"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-set-palette"><i class="fa fa-check"></i>Set Color Palette</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-colorbrewer"><i class="fa fa-check"></i>Use ColorBrewer</a></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#example---using-colorbrewer-for-us-wide-datasets"><i class="fa fa-check"></i>Example - using ColorBrewer for US wide datasets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizeArealData-tutorial.html"><a href="visualizeArealData-tutorial.html#TM-contributors"><i class="fa fa-check"></i>Contributors and Further Resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Opioid Environment Toolkit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="thematic-maps" class="section level1 unnumbered">
<h1>Visualize Areal Data - Choropleth Mapping (a.k.a Thematic Maps)</h1>
<div id="TM-research-question" class="section level2 unnumbered">
<h2>Research Question</h2>
<p>Once we have downloaded the contextual data and generated the access metrics, we can start visualizing them to identify any spatial patterns. This can help identify whether a variable is homogeneously distributed across space or do we see clustering &amp; spatial heterogeneity. In this tutorial we will cover methods to plot data variables spatially i.e. create thematic maps, technically known as choropleth maps. We will cover the most commonly used types of choropleth mapping techniques employed in R. Please note the methods covered here are mere an introduction to spatial plotting.</p>
</div>
<div id="TM-setup" class="section level2 unnumbered">
<h2>Environment Setup</h2>
<p>To replicate the codes &amp; functions illustrated in this tutorial, you’ll need to have R and RStudio downloaded and installed on your system. This tutorial assumes some familiarity with the R programming language.</p>
<div id="TM-packages1" class="section level4 unnumbered">
<h4>Packages used</h4>
<p>We will use the following packages in this tutorial:</p>
<ul>
<li><code>tidyverse</code>: to manipulate data</li>
<li><code>tmap</code>: to visualize and create maps</li>
<li><code>sf</code>: to read/write and manipulate spatial data</li>
</ul>
</div>
<div id="TM-i-o" class="section level4 unnumbered">
<h4>Required Inputs and Expected Outputs</h4>
<p>We will using the race data for Illinois downloaded &amp; saved as a shapefile using the <a href="link">get-ACS_Data tutorial</a> from the Census Bureau.</p>
<p>Our output will be three thematic maps highlighting the distribution of percentage hispanic population at a county level across the state of Illinois.</p>
</div>
<div id="TM-packages2" class="section level4 unnumbered">
<h4>Install and load the packages</h4>
<p>First, install and load the relevant R packages with the following commands:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="visualizeArealData-tutorial.html#cb113-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb113-2"><a href="visualizeArealData-tutorial.html#cb113-2"></a><span class="kw">install.packages</span>(<span class="st">&quot;tmap&quot;</span>)</span>
<span id="cb113-3"><a href="visualizeArealData-tutorial.html#cb113-3"></a><span class="kw">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="visualizeArealData-tutorial.html#cb114-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb114-2"><a href="visualizeArealData-tutorial.html#cb114-2"></a><span class="kw">library</span>(tmap)</span>
<span id="cb114-3"><a href="visualizeArealData-tutorial.html#cb114-3"></a><span class="kw">library</span>(sf)</span></code></pre></div>
</div>
</div>
<div id="TM-load-variables" class="section level2 unnumbered">
<h2>Load data</h2>
<p>We will read in the shapefile with percentage hispanic population at the county level for the state of Illinois for year 2018.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="visualizeArealData-tutorial.html#cb115-1"></a>pctHispanic &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;IL_County_18.shp&quot;</span>)</span></code></pre></div>
<p>Alternatively, if you have not saved the dataset from <a href="link">get-ACS-Data tutorial</a>, you can download it using the code below.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="visualizeArealData-tutorial.html#cb116-1"></a><span class="kw">require</span>(tidycensus)</span>
<span id="cb116-2"><a href="visualizeArealData-tutorial.html#cb116-2"></a>pctHispanic &lt;-<span class="st"> </span>tidycensus<span class="op">::</span><span class="kw">get_acs</span>(<span class="dt">geography =</span> <span class="st">&#39;county&#39;</span>, <span class="dt">state =</span> <span class="st">&#39;IL&#39;</span>, </span>
<span id="cb116-3"><a href="visualizeArealData-tutorial.html#cb116-3"></a>                                   <span class="dt">variables =</span>  <span class="kw">c</span>(<span class="dt">totPop18 =</span> <span class="st">&quot;B01001_001&quot;</span>, </span>
<span id="cb116-4"><a href="visualizeArealData-tutorial.html#cb116-4"></a>                                                  <span class="dt">hispanic =</span><span class="st">&quot;B03003_003&quot;</span>, </span>
<span id="cb116-5"><a href="visualizeArealData-tutorial.html#cb116-5"></a>                                                  <span class="dt">notHispanic =</span> <span class="st">&quot;B03003_002&quot;</span>,</span>
<span id="cb116-6"><a href="visualizeArealData-tutorial.html#cb116-6"></a>                                                  <span class="dt">white =</span> <span class="st">&quot;B02001_002&quot;</span>, </span>
<span id="cb116-7"><a href="visualizeArealData-tutorial.html#cb116-7"></a>                                                  <span class="dt">afrAm =</span> <span class="st">&quot;B02001_003&quot;</span>, </span>
<span id="cb116-8"><a href="visualizeArealData-tutorial.html#cb116-8"></a>                                                  <span class="dt">asian =</span> <span class="st">&quot;B02001_005&quot;</span>),</span>
<span id="cb116-9"><a href="visualizeArealData-tutorial.html#cb116-9"></a>                                   <span class="dt">year =</span> <span class="dv">2018</span>, <span class="dt">geometry =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb116-10"><a href="visualizeArealData-tutorial.html#cb116-10"></a><span class="st">                           </span><span class="kw">select</span>(GEOID, NAME, variable, estimate) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb116-11"><a href="visualizeArealData-tutorial.html#cb116-11"></a><span class="st">                           </span><span class="kw">spread</span>(variable, estimate) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb116-12"><a href="visualizeArealData-tutorial.html#cb116-12"></a><span class="st">                           </span><span class="kw">mutate</span>(<span class="dt">hispPr18  =</span> hispanic<span class="op">/</span>totPop18, <span class="dt">WhitePr18 =</span> white<span class="op">/</span>totPop18,</span>
<span id="cb116-13"><a href="visualizeArealData-tutorial.html#cb116-13"></a>                                  <span class="dt">AfrAmPr18 =</span> afrAm<span class="op">/</span>totPop18, <span class="dt">AsianPr18 =</span> asian<span class="op">/</span>totPop18) <span class="op">%&gt;%</span></span>
<span id="cb116-14"><a href="visualizeArealData-tutorial.html#cb116-14"></a><span class="st">                           </span><span class="kw">select</span>(GEOID,totPop18,hispPr18,WhitePr18,AfrAmPr18, AsianPr18)</span></code></pre></div>
<p>Lets check the dataset structure.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="visualizeArealData-tutorial.html#cb117-1"></a><span class="kw">head</span>(pctHispanic)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -91.51308 ymin: 36.9703 xmax: -88.70541 ymax: 42.49505
## geographic CRS: NAD83
##   GEOID totPop18   hispPr18 WhitePr18   AfrAmPr18
## 1 17001    66427 0.01537026 0.9306306 0.040826772
## 2 17003     6532 0.01117575 0.6243111 0.332057563
## 3 17005    16712 0.03458593 0.9088679 0.062410244
## 4 17007    53606 0.21376338 0.8741745 0.022199008
## 5 17009     6675 0.04284644 0.7742322 0.204344569
## 6 17011    33381 0.08972170 0.9361613 0.009316677
##      AsianPr18                       geometry
## 1 0.0081292246 MULTIPOLYGON (((-91.51297 4...
## 2 0.0009185548 MULTIPOLYGON (((-89.51839 3...
## 3 0.0117280996 MULTIPOLYGON (((-89.63926 3...
## 4 0.0118083797 MULTIPOLYGON (((-88.94098 4...
## 5 0.0055430712 MULTIPOLYGON (((-90.91703 3...
## 6 0.0086576196 MULTIPOLYGON (((-89.86235 4...</code></pre>
<p>In a shapefile, the ‘geometry’ column provides the geographic information/boundaries that we can map. We can do a quick plot using:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="visualizeArealData-tutorial.html#cb119-1"></a><span class="kw">plot</span>(pctHispanic<span class="op">$</span>geometry)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/quick%20plot-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Before we move ahead, lets convert the percentages for easy plotting.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="visualizeArealData-tutorial.html#cb120-1"></a>pctHispanic &lt;-<span class="st"> </span>pctHispanic <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb120-2"><a href="visualizeArealData-tutorial.html#cb120-2"></a><span class="st">               </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(hispPr18<span class="op">:</span>AsianPr18),</span>
<span id="cb120-3"><a href="visualizeArealData-tutorial.html#cb120-3"></a>                          <span class="dt">.funs =</span> <span class="kw">funs</span>(<span class="kw">round</span>(. <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,<span class="dv">2</span>)))</span></code></pre></div>
</div>
<div id="TM-mapping" class="section level2 unnumbered">
<h2>Thematic Plotting</h2>
<p>We will be using <code>tmap</code> package for plotting spatial data distributions. The package syntax has similarities with <code>ggplot2</code> and follows the same idea of <em>A Layered Grammar of Graphics</em>.</p>
<ul>
<li>for each input data layer use <code>tm_shape()</code>,</li>
<li>followed by the method to plot it, e.g <code>tm_fill() or tm_dots() or tm_line() or tm_borders()</code> etc.</li>
</ul>
<p>Similar to ggplot2, aesthetics can be provided for each layer and plot layout can be manipulated using <code>tm_layout()</code>. For more details on <code>tmap</code> usage &amp; functionality, check <a href="https://cran.r-project.org/web/packages/tmap/tmap.pdf">tmap documentation</a>. The previous map we plotted using <code>plot</code> can be mapped using <code>tmap</code> as in the code below.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="visualizeArealData-tutorial.html#cb121-1"></a><span class="kw">tmap_mode</span>(<span class="st">&#39;plot&#39;</span>)</span></code></pre></div>
<pre><code>## tmap mode set to plotting</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="visualizeArealData-tutorial.html#cb123-1"></a><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span>  <span class="ot">FALSE</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/quick%20plot%20tmap-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In tmap, the classification scheme is set by the <code>style</code> option in <code>tm_fill()</code> and the default style is <code>pretty</code>. Lets plot the distribution of percentage of hispanic population by county across the state of Illinois with default style using the code below. We can also change the color palette used to depict the spatial distribution. See <a href="visualizeArealData-tutorial.html#TM-set-palette">Set Color Palette</a> in Appendix for more details on that.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="visualizeArealData-tutorial.html#cb124-1"></a><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Pretty&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb124-2"><a href="visualizeArealData-tutorial.html#cb124-2"></a><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb124-3"><a href="visualizeArealData-tutorial.html#cb124-3"></a><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>,</span>
<span id="cb124-4"><a href="visualizeArealData-tutorial.html#cb124-4"></a>          <span class="dt">legend.title.size =</span> <span class="fl">0.9</span>,</span>
<span id="cb124-5"><a href="visualizeArealData-tutorial.html#cb124-5"></a>          <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb124-6"><a href="visualizeArealData-tutorial.html#cb124-6"></a>          <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20pretty-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We will be plotting the spatial distribution of variable hispPr18 for the state of Illinois using three methods.</p>
<ol style="list-style-type: decimal">
<li>Quantile</li>
<li>Natural Breaks</li>
<li>Standard Deviation</li>
</ol>
<p>For detailed documentation on choropleth mapping and methods use check <a href="https://geodacenter.github.io/workbook/3a_mapping/lab3a.html#thematic-maps-overview">GeoDa Center Documentation</a>.</p>
<div id="TM-quantile-plot" class="section level3 unnumbered">
<h3>Quantile</h3>
<p>A quantile map is based on sorted values for the variable that are then grouped into bins such that each bin has the same number of observations. It is obtained by setting <code>style = 'quantile'</code> and <code>n = no of bins</code> arguments in tm_fill().</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="visualizeArealData-tutorial.html#cb125-1"></a>p1 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Quantile&#39;</span>, </span>
<span id="cb125-2"><a href="visualizeArealData-tutorial.html#cb125-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;quantile&#39;</span>, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb125-3"><a href="visualizeArealData-tutorial.html#cb125-3"></a><span class="st">      </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,<span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, </span>
<span id="cb125-4"><a href="visualizeArealData-tutorial.html#cb125-4"></a>                <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb125-5"><a href="visualizeArealData-tutorial.html#cb125-5"></a>                <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb125-6"><a href="visualizeArealData-tutorial.html#cb125-6"></a>                <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span>
<span id="cb125-7"><a href="visualizeArealData-tutorial.html#cb125-7"></a></span>
<span id="cb125-8"><a href="visualizeArealData-tutorial.html#cb125-8"></a><span class="co">#tmap_save(p1, &#39;PctHisp_18_Quantile.png&#39;) # save the map in a .png file</span></span>
<span id="cb125-9"><a href="visualizeArealData-tutorial.html#cb125-9"></a>p1</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20quantile-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="TM-jenks-plot" class="section level3 unnumbered">
<h3>Natural Breaks</h3>
<p>Natural breaks or jenks distribution uses a nonlinear algorithm to cluster data into groups such that the intra-bin similarity is maximized and inter-bin dissimilarity is minimized. It is obtained by setting <code>style = 'jenks'</code> and <code>n = no. of bins</code> in the tm_fill().</p>
<p>As we can see, jenks method better classifies the dataset in review than the quantile distribution. There is no correct method to use and the choice of classification method is dependent on the problem &amp; dataset used.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="visualizeArealData-tutorial.html#cb126-1"></a>p2 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Jenks&#39;</span>, </span>
<span id="cb126-2"><a href="visualizeArealData-tutorial.html#cb126-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;jenks&#39;</span>, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb126-3"><a href="visualizeArealData-tutorial.html#cb126-3"></a><span class="st">      </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,<span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, </span>
<span id="cb126-4"><a href="visualizeArealData-tutorial.html#cb126-4"></a>                <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb126-5"><a href="visualizeArealData-tutorial.html#cb126-5"></a>                <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb126-6"><a href="visualizeArealData-tutorial.html#cb126-6"></a>                <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span>
<span id="cb126-7"><a href="visualizeArealData-tutorial.html#cb126-7"></a></span>
<span id="cb126-8"><a href="visualizeArealData-tutorial.html#cb126-8"></a><span class="co">#tmap_save(p2, &#39;PctHisp_18_Jenks.png&#39;)# save the map in a .png file</span></span>
<span id="cb126-9"><a href="visualizeArealData-tutorial.html#cb126-9"></a>p2</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20jenks-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="TM-stdev-plot" class="section level3 unnumbered">
<h3>Standard Deviation</h3>
<p>A standard deviation map normalizes the dataset (mean = 0, stdev = 1) and transforms it into units of stdev (given mean =0). It helps identify outliers in the dataset. It is obtained by setting <code>style = 'sd'</code> in the tm_fill().
The normalization process can create bins with negative values, which in this case don’t necessarily make sense for the dataset, but it still helps identify the outliers.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="visualizeArealData-tutorial.html#cb127-1"></a>p3 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Stdev&#39;</span>, </span>
<span id="cb127-2"><a href="visualizeArealData-tutorial.html#cb127-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;sd&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb127-3"><a href="visualizeArealData-tutorial.html#cb127-3"></a><span class="st">      </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, </span>
<span id="cb127-4"><a href="visualizeArealData-tutorial.html#cb127-4"></a>                <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb127-5"><a href="visualizeArealData-tutorial.html#cb127-5"></a>                <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb127-6"><a href="visualizeArealData-tutorial.html#cb127-6"></a>                <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span>
<span id="cb127-7"><a href="visualizeArealData-tutorial.html#cb127-7"></a></span>
<span id="cb127-8"><a href="visualizeArealData-tutorial.html#cb127-8"></a><span class="co">#tmap_save(p3, &#39;PctHisp_18_Stdev.png&#39;)# save the map in a .png file</span></span>
<span id="cb127-9"><a href="visualizeArealData-tutorial.html#cb127-9"></a>p3</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20stdev-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="TM-appendix" class="section level2 unnumbered">
<h2>Appendix</h2>
<div id="TM-set-palette" class="section level3 unnumbered">
<h3>Set Color Palette</h3>
<p>The range of colors used to depict the distribution in the map can be set by modifying the <code>palette</code> argument in tm_fill(). For example, we can use <code>Blues</code> palette to create the map below.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="visualizeArealData-tutorial.html#cb128-1"></a><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Jenks&#39;</span>, </span>
<span id="cb128-2"><a href="visualizeArealData-tutorial.html#cb128-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;jenks&#39;</span>, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">palette =</span> <span class="st">&#39;Blues&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb128-3"><a href="visualizeArealData-tutorial.html#cb128-3"></a><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,<span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, </span>
<span id="cb128-4"><a href="visualizeArealData-tutorial.html#cb128-4"></a>          <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb128-5"><a href="visualizeArealData-tutorial.html#cb128-5"></a>          <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb128-6"><a href="visualizeArealData-tutorial.html#cb128-6"></a>          <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20palette-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="TM-colorbrewer" class="section level3 unnumbered">
<h3>Use ColorBrewer</h3>
<p>To build aesthetically pleasing and easy-to-read maps, we recommend using color palette schemes recommended in <a href="https://colorbrewer2.org/#">ColorBrewer 2.0</a> developed by Cynthia Brewer. The website distinguishes between sequential(ordered), diverging(spread around a center) &amp; qualitative(categorical) data. Information on these palettes cab be displayed in R using RColorBrewer package.</p>
<p>We can get the hex values for the colors used in a specific palette with n bins &amp; plot the corresponding colors using code below.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="visualizeArealData-tutorial.html#cb129-1"></a><span class="kw">require</span>(RColorBrewer)</span>
<span id="cb129-2"><a href="visualizeArealData-tutorial.html#cb129-2"></a></span>
<span id="cb129-3"><a href="visualizeArealData-tutorial.html#cb129-3"></a>RColorBrewer<span class="op">::</span><span class="kw">brewer.pal</span>(<span class="dv">5</span>,<span class="st">&quot;PuBuGn&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;#F6EFF7&quot; &quot;#BDC9E1&quot; &quot;#67A9CF&quot; &quot;#1C9099&quot; &quot;#016C59&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="visualizeArealData-tutorial.html#cb131-1"></a>RColorBrewer<span class="op">::</span><span class="kw">display.brewer.pal</span>(<span class="dv">5</span>,<span class="st">&quot;PuBuGn&quot;</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/colorbrewer-1.png" width="672" /></p>
<p>We can update the jenks map by using this sequential color scheme and changing the transparency using <code>alpha = 0.8</code> as below.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="visualizeArealData-tutorial.html#cb132-1"></a><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Jenks&#39;</span>, </span>
<span id="cb132-2"><a href="visualizeArealData-tutorial.html#cb132-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;jenks&#39;</span>, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">palette =</span> <span class="st">&#39;PuBuGn&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb132-3"><a href="visualizeArealData-tutorial.html#cb132-3"></a><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,</span>
<span id="cb132-4"><a href="visualizeArealData-tutorial.html#cb132-4"></a>          <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb132-5"><a href="visualizeArealData-tutorial.html#cb132-5"></a>          <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb132-6"><a href="visualizeArealData-tutorial.html#cb132-6"></a>          <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20jenks%20improved-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can also update the stdev map by using a diverging color scheme as below.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="visualizeArealData-tutorial.html#cb133-1"></a><span class="kw">tm_shape</span>(pctHispanic) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;hispPr18&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;PctHispanic% - Stdev&#39;</span>, </span>
<span id="cb133-2"><a href="visualizeArealData-tutorial.html#cb133-2"></a>                                <span class="dt">style =</span> <span class="st">&#39;sd&#39;</span>, <span class="dt">palette =</span> <span class="st">&#39;-RdBu&#39;</span>, <span class="dt">alpha =</span> <span class="fl">0.9</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb133-3"><a href="visualizeArealData-tutorial.html#cb133-3"></a><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,</span>
<span id="cb133-4"><a href="visualizeArealData-tutorial.html#cb133-4"></a>          <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb133-5"><a href="visualizeArealData-tutorial.html#cb133-5"></a>          <span class="dt">main.title =</span> <span class="st">&#39;Pct of hispanic population by county, IL 2018&#39;</span>, </span>
<span id="cb133-6"><a href="visualizeArealData-tutorial.html#cb133-6"></a>          <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20stdev%20improved-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="example---using-colorbrewer-for-us-wide-datasets" class="section level3 unnumbered">
<h3>Example - using ColorBrewer for US wide datasets</h3>
<p>Download and plot the distribution of median household income in US by county for year 2018.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="visualizeArealData-tutorial.html#cb134-1"></a><span class="kw">require</span>(tidycensus)</span>
<span id="cb134-2"><a href="visualizeArealData-tutorial.html#cb134-2"></a>medianHHInc &lt;-<span class="st"> </span>tidycensus<span class="op">::</span><span class="kw">get_acs</span>(<span class="st">&#39;county&#39;</span>, <span class="dt">variables =</span> <span class="kw">c</span>(<span class="dt">median_HHInc =</span> <span class="st">&#39;B19013_001&#39;</span>), </span>
<span id="cb134-3"><a href="visualizeArealData-tutorial.html#cb134-3"></a>                                    <span class="dt">year =</span> <span class="dv">2018</span>, <span class="dt">geometry =</span> <span class="ot">TRUE</span>, <span class="dt">output =</span> <span class="st">&#39;wide&#39;</span>)</span>
<span id="cb134-4"><a href="visualizeArealData-tutorial.html#cb134-4"></a></span>
<span id="cb134-5"><a href="visualizeArealData-tutorial.html#cb134-5"></a>medianHHInc &lt;-<span class="st"> </span>medianHHInc <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(NAME, <span class="kw">c</span>(<span class="st">&quot;CountyName&quot;</span>, <span class="st">&quot;State&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;, &#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb134-6"><a href="visualizeArealData-tutorial.html#cb134-6"></a><span class="st">               </span><span class="kw">filter</span>(<span class="op">!</span>(State <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Puerto Rico&#39;</span>,<span class="st">&#39;Alaska&#39;</span>,<span class="st">&#39;Hawaii&#39;</span>))) <span class="co">##  contiguous US</span></span>
<span id="cb134-7"><a href="visualizeArealData-tutorial.html#cb134-7"></a></span>
<span id="cb134-8"><a href="visualizeArealData-tutorial.html#cb134-8"></a><span class="kw">tm_shape</span>(medianHHInc) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="st">&#39;median_HHIncE&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;Median Household Income $ - Jenks&#39;</span>, </span>
<span id="cb134-9"><a href="visualizeArealData-tutorial.html#cb134-9"></a>                                <span class="dt">style =</span> <span class="st">&#39;jenks&#39;</span>, <span class="dt">n =</span> <span class="dv">7</span>, <span class="dt">palette =</span> <span class="st">&#39;PuBuGn&#39;</span>) <span class="op">+</span></span>
<span id="cb134-10"><a href="visualizeArealData-tutorial.html#cb134-10"></a><span class="kw">tm_borders</span>(<span class="dt">alpha =</span> <span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb134-11"><a href="visualizeArealData-tutorial.html#cb134-11"></a><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,</span>
<span id="cb134-12"><a href="visualizeArealData-tutorial.html#cb134-12"></a>          <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, <span class="dt">legend.outside.position =</span> <span class="st">&#39;right&#39;</span>, <span class="dt">legend.title.size =</span><span class="fl">0.9</span>,</span>
<span id="cb134-13"><a href="visualizeArealData-tutorial.html#cb134-13"></a>          <span class="dt">main.title =</span> <span class="st">&#39;Distribution of Household Income, by county, US 2018&#39;</span>, </span>
<span id="cb134-14"><a href="visualizeArealData-tutorial.html#cb134-14"></a>          <span class="dt">main.title.position =</span> <span class="kw">c</span>(<span class="st">&#39;center&#39;</span>,<span class="st">&#39;top&#39;</span>), <span class="dt">main.title.size =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="Opioid-Environment-Toolkit_files/figure-html/plot%20median%20hh%20income-1.png" width="800px" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="TM-contributors" class="section level2 unnumbered">
<h2>Contributors and Further Resources</h2>
<div id="contributors-3" class="section level5 unnumbered">
<h5>Contributors</h5>
<p>Moksha Menghaney, University of Chicago is the principal author of the initial version of this tutorial. Helpful improvements provided by Marynia Kolak.</p>
<p>Email: <a href="mailto:mmenghaney@uchicago.edu" class="email">mmenghaney@uchicago.edu</a> for any issues/comments.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="link-contextual-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
